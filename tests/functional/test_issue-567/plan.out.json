{ "format_version": "0.2", "terraform_version": "1.0.2", "variables": { "account": { "value": "eu-dev" }, "customer_profile_table_prefix": { "value": "some-service" }, "datadog_api_key": { "value": "some-api-key" }, "datadog_api_url": { "value": "https://api.datadoghq.eu/" }, "datadog_app_key": { "value": "some-app-key" }, "environment": { "value": "dev" }, "region": { "value": "some-az" } }, "planned_values": { "outputs": { "iam_role_arn": { "sensitive": false, "value": "arn:aws:iam::333333333333:role/some-service_role" } }, "root_module": { "resources": [], "child_modules": [] } }, "resource_changes": [ { "address": "datadog_monitor.kubernetes_api_cpu_request_exceeded[0]", "mode": "managed", "type": "datadog_monitor", "name": "kubernetes_api_cpu_request_exceeded", "index": 0, "provider_name": "registry.terraform.io/datadog/datadog", "change": { "actions": [ "update" ], "before": {}, "after": { "enable_logs_sample": null, "escalation_message": "", "evaluation_delay": 0, "force_delete": null, "groupby_simple_monitor": null, "id": "some-id", "include_tags": true, "locked": false, "message": "some-message", "monitor_threshold_windows": [], "monitor_thresholds": [ { "critical": "5e+07", "critical_recovery": "4.5e+07", "ok": "", "unknown": "", "warning": "", "warning_recovery": "" } ], "name": "some-az.dev.some-service-api.some-service-api-microservice.cpu.request-exceeded", "new_host_delay": 300, "no_data_timeframe": 0, "notify_audit": false, "notify_no_data": false, "priority": 3, "query": "some-query", "renotify_interval": 0, "require_full_window": true, "restricted_roles": [], "silenced": {}, "tags": [ "environment:dev", "managed_by:terraform", "owner:some-owner", "service:some-service" ], "threshold_windows": null, "thresholds": null, "timeout_h": 0, "type": "query alert", "validate": null }, "after_unknown": {}, "before_sensitive": {}, "after_sensitive": { "monitor_threshold_windows": [], "monitor_thresholds": [ {} ], "restricted_roles": [], "silenced": {}, "tags": [ false, false, false, false ] } } }, { "address": "datadog_monitor.kubernetes_memory_limit_percentage_exceeded[0]", "mode": "managed", "type": "datadog_monitor", "name": "kubernetes_memory_limit_percentage_exceeded", "index": 0, "provider_name": "registry.terraform.io/datadog/datadog", "change": { "actions": [ "update" ], "before": {}, "after": { "enable_logs_sample": null, "escalation_message": "", "evaluation_delay": 0, "force_delete": null, "groupby_simple_monitor": null, "id": "some-id", "include_tags": true, "locked": false, "message": "some-message", "monitor_threshold_windows": [], "monitor_thresholds": [ { "critical": "6.654263296e+08", "critical_recovery": "5.36870912e+08", "ok": "", "unknown": "", "warning": "", "warning_recovery": "" } ], "name": "some-az.dev.some-service-api.some-service-api-microservice.memory.limit-percentage-exceeded", "new_host_delay": 300, "no_data_timeframe": 0, "notify_audit": false, "notify_no_data": false, "priority": 3, "query": "some-query", "renotify_interval": 0, "require_full_window": false, "restricted_roles": [], "silenced": {}, "tags": [ "environment:dev", "managed_by:terraform", "owner:some-owner", "service:some-service" ], "threshold_windows": null, "thresholds": null, "timeout_h": 0, "type": "query alert", "validate": null }, "after_unknown": {}, "before_sensitive": {}, "after_sensitive": { "monitor_threshold_windows": [], "monitor_thresholds": [ {} ], "restricted_roles": [], "silenced": {}, "tags": [ false, false, false, false ] } } }, { "address": "datadog_monitor.kubernetes_memory_limit_percentage_exceeded[1]", "mode": "managed", "type": "datadog_monitor", "name": "kubernetes_memory_limit_percentage_exceeded", "index": 1, "provider_name": "registry.terraform.io/datadog/datadog", "change": { "actions": [ "update" ], "before": {}, "after": { "enable_logs_sample": null, "escalation_message": "", "evaluation_delay": 0, "force_delete": null, "groupby_simple_monitor": null, "id": "some-id", "include_tags": true, "locked": false, "message": "some-message", "monitor_threshold_windows": [], "monitor_thresholds": [ { "critical": "6.654263296e+08", "critical_recovery": "5.36870912e+08", "ok": "", "unknown": "", "warning": "", "warning_recovery": "" } ], "name": "some-az.dev.some-service-api.some-service-api-anonym-dissociated-worker.memory.limit-percentage-exceeded", "new_host_delay": 300, "no_data_timeframe": 0, "notify_audit": false, "notify_no_data": false, "priority": 3, "query": "some-query", "renotify_interval": 0, "require_full_window": false, "restricted_roles": [], "silenced": {}, "tags": [ "environment:dev", "managed_by:terraform", "owner:some-owner", "service:some-service" ], "threshold_windows": null, "thresholds": null, "timeout_h": 0, "type": "query alert", "validate": null }, "after_unknown": {}, "before_sensitive": { "monitor_threshold_windows": [], "monitor_thresholds": [ {} ], "restricted_roles": [], "silenced": {}, "tags": [ false, false, false, false ] }, "after_sensitive": { "monitor_threshold_windows": [], "monitor_thresholds": [ {} ], "restricted_roles": [], "silenced": {}, "tags": [ false, false, false, false ] } } }, { "address": "datadog_monitor.kubernetes_memory_limit_percentage_exceeded[2]", "mode": "managed", "type": "datadog_monitor", "name": "kubernetes_memory_limit_percentage_exceeded", "index": 2, "provider_name": "registry.terraform.io/datadog/datadog", "change": { "actions": [ "update" ], "before": {}, "after": { "enable_logs_sample": null, "escalation_message": "", "evaluation_delay": 0, "force_delete": null, "groupby_simple_monitor": null, "id": "some-id", "include_tags": true, "locked": false, "message": "some-message", "monitor_threshold_windows": [], "monitor_thresholds": [ { "critical": "6.654263296e+08", "critical_recovery": "5.36870912e+08", "ok": "", "unknown": "", "warning": "", "warning_recovery": "" } ], "name": "some-az.dev.some-service-api.some-service-api-customer-events-stream-worker.memory.limit-percentage-exceeded", "new_host_delay": 300, "no_data_timeframe": 0, "notify_audit": false, "notify_no_data": false, "priority": 3, "query": "some-query", "renotify_interval": 0, "require_full_window": false, "restricted_roles": [], "silenced": {}, "tags": [ "environment:dev", "managed_by:terraform", "owner:some-owner", "service:some-service" ], "threshold_windows": null, "thresholds": null, "timeout_h": 0, "type": "query alert", "validate": null }, "after_unknown": {}, "before_sensitive": { "monitor_threshold_windows": [], "monitor_thresholds": [ {} ], "restricted_roles": [], "silenced": {}, "tags": [ false, false, false, false ] }, "after_sensitive": { "monitor_threshold_windows": [], "monitor_thresholds": [ {} ], "restricted_roles": [], "silenced": {}, "tags": [ false, false, false, false ] } } }, { "address": "datadog_monitor.kubernetes_memory_limit_reached[0]", "mode": "managed", "type": "datadog_monitor", "name": "kubernetes_memory_limit_reached", "index": 0, "provider_name": "registry.terraform.io/datadog/datadog", "change": { "actions": [ "no-op" ], "before": {}, "after": { "enable_logs_sample": null, "escalation_message": "", "evaluation_delay": 0, "force_delete": null, "groupby_simple_monitor": null, "id": "some-id", "include_tags": true, "locked": false, "message": "some-message", "monitor_threshold_windows": [], "monitor_thresholds": [ { "critical": "7.00448768e+08", "critical_recovery": "5.36870912e+08", "ok": "", "unknown": "", "warning": "", "warning_recovery": "" } ], "name": "some-az.dev.some-service-api.some-service-api-microservice.memory.limit-reached", "new_host_delay": 300, "no_data_timeframe": 0, "notify_audit": false, "notify_no_data": false, "priority": 1, "query": "some-query", "renotify_interval": 0, "require_full_window": false, "restricted_roles": [], "silenced": {}, "tags": [ "environment:dev", "managed_by:terraform", "owner:some-owner", "service:some-service" ], "threshold_windows": null, "thresholds": null, "timeout_h": 0, "type": "query alert", "validate": null }, "after_unknown": {}, "before_sensitive": { "monitor_threshold_windows": [], "monitor_thresholds": [ {} ], "restricted_roles": [], "silenced": {}, "tags": [ false, false, false, false ] }, "after_sensitive": { "monitor_threshold_windows": [], "monitor_thresholds": [ {} ], "restricted_roles": [], "silenced": {}, "tags": [ false, false, false, false ] } } }, { "address": "datadog_monitor.kubernetes_memory_limit_reached[1]", "mode": "managed", "type": "datadog_monitor", "name": "kubernetes_memory_limit_reached", "index": 1, "provider_name": "registry.terraform.io/datadog/datadog", "change": { "actions": [ "no-op" ], "before": {}, "after": { "enable_logs_sample": null, "escalation_message": "", "evaluation_delay": 0, "force_delete": null, "groupby_simple_monitor": null, "id": "some-id", "include_tags": true, "locked": false, "message": "some-message", "monitor_threshold_windows": [], "monitor_thresholds": [ { "critical": "7.00448768e+08", "critical_recovery": "5.36870912e+08", "ok": "", "unknown": "", "warning": "", "warning_recovery": "" } ], "name": "some-az.dev.some-service-api.some-service-api-anonym-dissociated-worker.memory.limit-reached", "new_host_delay": 300, "no_data_timeframe": 0, "notify_audit": false, "notify_no_data": false, "priority": 1, "query": "some-query", "renotify_interval": 0, "require_full_window": false, "restricted_roles": [], "silenced": {}, "tags": [ "environment:dev", "managed_by:terraform", "owner:some-owner", "service:some-service" ], "threshold_windows": null, "thresholds": null, "timeout_h": 0, "type": "query alert", "validate": null }, "after_unknown": {}, "before_sensitive": { "monitor_threshold_windows": [], "monitor_thresholds": [ {} ], "restricted_roles": [], "silenced": {}, "tags": [ false, false, false, false ] }, "after_sensitive": { "monitor_threshold_windows": [], "monitor_thresholds": [ {} ], "restricted_roles": [], "silenced": {}, "tags": [ false, false, false, false ] } } }, { "address": "datadog_monitor.kubernetes_memory_limit_reached[2]", "mode": "managed", "type": "datadog_monitor", "name": "kubernetes_memory_limit_reached", "index": 2, "provider_name": "registry.terraform.io/datadog/datadog", "change": { "actions": [ "no-op" ], "before": {}, "after": { "enable_logs_sample": null, "escalation_message": "", "evaluation_delay": 0, "force_delete": null, "groupby_simple_monitor": null, "id": "some-id", "include_tags": true, "locked": false, "message": "some-message", "monitor_threshold_windows": [], "monitor_thresholds": [ { "critical": "7.00448768e+08", "critical_recovery": "5.36870912e+08", "ok": "", "unknown": "", "warning": "", "warning_recovery": "" } ], "name": "some-az.dev.some-service-api.some-service-api-customer-events-stream-worker.memory.limit-reached", "new_host_delay": 300, "no_data_timeframe": 0, "notify_audit": false, "notify_no_data": false, "priority": 1, "query": "some-query", "renotify_interval": 0, "require_full_window": false, "restricted_roles": [], "silenced": {}, "tags": [ "environment:dev", "managed_by:terraform", "owner:some-owner", "service:some-service" ], "threshold_windows": null, "thresholds": null, "timeout_h": 0, "type": "query alert", "validate": null }, "after_unknown": {}, "before_sensitive": { "monitor_threshold_windows": [], "monitor_thresholds": [ {} ], "restricted_roles": [], "silenced": {}, "tags": [ false, false, false, false ] }, "after_sensitive": { "monitor_threshold_windows": [], "monitor_thresholds": [ {} ], "restricted_roles": [], "silenced": {}, "tags": [ false, false, false, false ] } } }, { "address": "datadog_monitor.kubernetes_memory_request[1]", "mode": "managed", "type": "datadog_monitor", "name": "kubernetes_memory_request", "index": 1, "provider_name": "registry.terraform.io/datadog/datadog", "change": { "actions": [ "no-op" ], "before": null, "after": null, "after_unknown": {}, "before_sensitive": false, "after_sensitive": false } }, { "address": "datadog_monitor.kubernetes_worker_cpu_request_exceeded[0]", "mode": "managed", "type": "datadog_monitor", "name": "kubernetes_worker_cpu_request_exceeded", "index": 0, "provider_name": "registry.terraform.io/datadog/datadog", "change": { "actions": [ "update" ], "before": {}, "after": { "enable_logs_sample": null, "escalation_message": "", "evaluation_delay": 0, "force_delete": null, "groupby_simple_monitor": null, "id": "some-id", "include_tags": true, "locked": false, "message": "some-message", "monitor_threshold_windows": [], "monitor_thresholds": [ { "critical": "5e+07", "critical_recovery": "4.5e+07", "ok": "", "unknown": "", "warning": "", "warning_recovery": "" } ], "name": "some-az.dev.some-service-api.some-service-api-anonym-dissociated-worker.cpu.request-exceeded", "new_host_delay": 300, "no_data_timeframe": 0, "notify_audit": false, "notify_no_data": false, "priority": 3, "query": "some-query", "renotify_interval": 0, "require_full_window": true, "restricted_roles": [], "silenced": {}, "tags": [ "environment:dev", "managed_by:terraform", "owner:some-owner", "service:some-service" ], "threshold_windows": null, "thresholds": null, "timeout_h": 0, "type": "query alert", "validate": null }, "after_unknown": {}, "before_sensitive": { "monitor_threshold_windows": [], "monitor_thresholds": [ {} ], "restricted_roles": [], "silenced": {}, "tags": [ false, false, false, false ] }, "after_sensitive": { "monitor_threshold_windows": [], "monitor_thresholds": [ {} ], "restricted_roles": [], "silenced": {}, "tags": [ false, false, false, false ] } } }, { "address": "datadog_monitor.kubernetes_worker_cpu_request_exceeded[1]", "mode": "managed", "type": "datadog_monitor", "name": "kubernetes_worker_cpu_request_exceeded", "index": 1, "provider_name": "registry.terraform.io/datadog/datadog", "change": { "actions": [ "update" ], "before": {}, "after": { "enable_logs_sample": null, "escalation_message": "", "evaluation_delay": 0, "force_delete": null, "groupby_simple_monitor": null, "id": "some-id", "include_tags": true, "locked": false, "message": "some-message", "monitor_threshold_windows": [], "monitor_thresholds": [ { "critical": "5e+07", "critical_recovery": "4.5e+07", "ok": "", "unknown": "", "warning": "", "warning_recovery": "" } ], "name": "some-az.dev.some-service-api.some-service-api-customer-events-stream-worker.cpu.request-exceeded", "new_host_delay": 300, "no_data_timeframe": 0, "notify_audit": false, "notify_no_data": false, "priority": 3, "query": "some-query", "renotify_interval": 0, "require_full_window": true, "restricted_roles": [], "silenced": {}, "tags": [ "environment:dev", "managed_by:terraform", "owner:some-owner", "service:some-service" ], "threshold_windows": null, "thresholds": null, "timeout_h": 0, "type": "query alert", "validate": null }, "after_unknown": {}, "before_sensitive": { "monitor_threshold_windows": [], "monitor_thresholds": [ {} ], "restricted_roles": [], "silenced": {}, "tags": [ false, false, false, false ] }, "after_sensitive": { "monitor_threshold_windows": [], "monitor_thresholds": [ {} ], "restricted_roles": [], "silenced": {}, "tags": [ false, false, false, false ] } } } ], "configuration": { "provider_config": { "aws": { "name": "aws", "expressions": { "region": { "references": [ "var.region" ] } } }, "datadog": { "name": "datadog", "expressions": { "api_key": { "references": [ "var.datadog_api_key" ] }, "api_url": { "references": [ "var.datadog_api_url" ] }, "app_key": { "references": [ "var.datadog_app_key" ] } } }, "module.application-resource-secrets:aws": { "name": "aws", "version_constraint": "\u003e= 3.19.0", "module_address": "module.application-resource-secrets" }, "module.customer_event_topic_v2:aws": { "name": "aws", "version_constraint": "\u003e= 3.42.0", "module_address": "module.customer_event_topic_v2" }, "module.customer_event_topic_v2:template": { "name": "template", "module_address": "module.customer_event_topic_v2" }, "module.customer_profile_events_dynamodb_table:aws": { "name": "aws", "version_constraint": "\u003e= 3.19.0", "module_address": "module.customer_profile_events_dynamodb_table" }, "module.customer_profile_events_dynamodb_table:null": { "name": "null", "module_address": "module.customer_profile_events_dynamodb_table" }, "module.customer_profile_kinesis_lease_dynamodb_table:aws": { "name": "aws", "version_constraint": "\u003e= 3.19.0", "module_address": "module.customer_profile_kinesis_lease_dynamodb_table" }, "module.customer_profile_kinesis_lease_dynamodb_table:null": { "name": "null", "module_address": "module.customer_profile_kinesis_lease_dynamodb_table" }, "module.customer_profile_table:aws": { "name": "aws", "version_constraint": "\u003e= 3.19.0", "module_address": "module.customer_profile_table" }, "module.customer_profile_table:null": { "name": "null", "module_address": "module.customer_profile_table" }, "module.customer_registered_topic:aws": { "name": "aws", "version_constraint": "\u003e= 3.42.0", "module_address": "module.customer_registered_topic" }, "module.customer_registered_topic:template": { "name": "template", "module_address": "module.customer_registered_topic" }, "module.dissociate-anonyms-1-queue:aws": { "name": "aws", "version_constraint": "\u003e= 3.19.0", "module_address": "module.dissociate-anonyms-1-queue" }, "module.dissociate-anonyms-1-queue:template": { "name": "template", "module_address": "module.dissociate-anonyms-1-queue" }, "module.dissociate-anonyms-1-topic-subscription:aws": { "name": "aws", "version_constraint": "\u003e= 3.19.0", "module_address": "module.dissociate-anonyms-1-topic-subscription" }, "module.some-service-api-operations-dashboard-and-monitors:datadog": { "name": "datadog", "version_constraint": "\u003e= 2.7.0", "module_address": "module.some-service-api-operations-dashboard-and-monitors" }, "module.some-service-datadog-monitor-anonym-dissociate-dead-letter-queue:datadog": { "name": "datadog", "version_constraint": "\u003e= 2.7.0", "module_address": "module.some-service-datadog-monitor-anonym-dissociate-dead-letter-queue" }, "module.some-service-datadog-monitor-customer-event-publisher-errors:datadog": { "name": "datadog", "version_constraint": "\u003e= 2.7.0", "module_address": "module.some-service-datadog-monitor-customer-event-publisher-errors" }, "module.some-service-datadog-monitor-customer-events-not-processed:datadog": { "name": "datadog", "version_constraint": "\u003e= 2.7.0", "module_address": "module.some-service-datadog-monitor-customer-events-not-processed" }, "module.some-service-datadog-monitor-customer-events-slow-record-consumption:datadog": { "name": "datadog", "version_constraint": "\u003e= 2.7.0", "module_address": "module.some-service-datadog-monitor-customer-events-slow-record-consumption" }, "module.some-service-datadog-monitor-customer-events-stream-processed-errors:datadog": { "name": "datadog", "version_constraint": "\u003e= 2.7.0", "module_address": "module.some-service-datadog-monitor-customer-events-stream-processed-errors" }, "module.some-service-datadog-monitor-customer-events-stuck-shard:datadog": { "name": "datadog", "version_constraint": "\u003e= 2.7.0", "module_address": "module.some-service-datadog-monitor-customer-events-stuck-shard" }, "module.some-service-datadog-monitor-load-balancer-client-error-anomaly:datadog": { "name": "datadog", "version_constraint": "\u003e= 2.7.0", "module_address": "module.some-service-datadog-monitor-load-balancer-client-error-anomaly" }, "module.some-service-datadog-monitor-load-balancer-error-ratio:datadog": { "name": "datadog", "version_constraint": "\u003e= 2.7.0", "module_address": "module.some-service-datadog-monitor-load-balancer-error-ratio" }, "module.some-service-datadog-service-level-objectives:datadog": { "name": "datadog", "version_constraint": "\u003e= 2.7.0", "module_address": "module.some-service-datadog-service-level-objectives" }, "module.some-service-iam:aws": { "name": "aws", "version_constraint": "\u003e= 3.19.0", "module_address": "module.some-service-iam" }, "module.some-service-xpto-ci-customer-ids-bucket:aws": { "name": "aws", "version_constraint": "\u003e= 3.19.0", "module_address": "module.some-service-xpto-ci-customer-ids-bucket" }, "module.some-service-ssm:aws": { "name": "aws", "version_constraint": "\u003e= 3.19.0", "module_address": "module.some-service-ssm" }, "random": { "name": "random" } }, "root_module": { "outputs": { "iam_role_arn": { "expression": { "references": [ "module.some-service-iam.iam_role_arn", "module.some-service-iam" ] }, "description": "some-description" } }, "resources": [ { "address": "datadog_monitor.kubernetes_api_cpu_request_exceeded", "mode": "managed", "type": "datadog_monitor", "name": "kubernetes_api_cpu_request_exceeded", "provider_config_key": "datadog", "expressions": { "message": { "references": [ "local.k8s_api_deployments", "count.index", "local.datadog_escalation_team" ] }, "monitor_thresholds": [ { "critical": { "references": [ "local.kubernetes_api_cpu_request" ] }, "critical_recovery": { "references": [ "local.kubernetes_cpu_recovery_threshold" ] } } ], "name": { "references": [ "var.region", "var.environment", "local.datadog_service_name", "local.k8s_api_deployments", "count.index" ] }, "priority": { "constant_value": 3 }, "query": { "references": [ "local.k8s_api_deployments", "count.index", "local.kubernetes_api_cpu_request" ] }, "require_full_window": { "constant_value": true }, "tags": { "references": [ "local.datadog_tags" ] }, "type": { "constant_value": "query alert" } }, "schema_version": 0, "count_expression": { "references": [ "local.k8s_api_deployments" ] } }, { "address": "datadog_monitor.kubernetes_memory_limit_percentage_exceeded", "mode": "managed", "type": "datadog_monitor", "name": "kubernetes_memory_limit_percentage_exceeded", "provider_config_key": "datadog", "expressions": { "message": { "references": [ "local.k8s_deployments", "count.index", "local.memory_limit_warning_threshold_percentage", "local.datadog_escalation_team" ] }, "monitor_thresholds": [ { "critical": { "references": [ "local.kubernetes_memory_limit", "local.memory_limit_warning_threshold_percentage" ] }, "critical_recovery": { "references": [ "local.kubernetes_memory_request" ] } } ], "name": { "references": [ "var.region", "var.environment", "local.datadog_service_name", "local.k8s_deployments", "count.index" ] }, "priority": { "constant_value": 3 }, "query": { "references": [ "local.k8s_deployments", "count.index", "local.kubernetes_memory_limit", "local.memory_limit_warning_threshold_percentage" ] }, "require_full_window": { "constant_value": false }, "tags": { "references": [ "local.datadog_tags" ] }, "type": { "constant_value": "query alert" } }, "schema_version": 0, "count_expression": { "references": [ "local.k8s_deployments" ] } }, { "address": "datadog_monitor.kubernetes_memory_limit_reached", "mode": "managed", "type": "datadog_monitor", "name": "kubernetes_memory_limit_reached", "provider_config_key": "datadog", "expressions": { "message": { "references": [ "local.k8s_deployments", "count.index", "local.datadog_escalation_team" ] }, "monitor_thresholds": [ { "critical": { "references": [ "local.kubernetes_memory_limit" ] }, "critical_recovery": { "references": [ "local.kubernetes_memory_request" ] } } ], "name": { "references": [ "var.region", "var.environment", "local.datadog_service_name", "local.k8s_deployments", "count.index" ] }, "priority": { "constant_value": 1 }, "query": { "references": [ "local.k8s_deployments", "count.index", "local.kubernetes_memory_limit" ] }, "require_full_window": { "constant_value": false }, "tags": { "references": [ "local.datadog_tags" ] }, "type": { "constant_value": "query alert" } }, "schema_version": 0, "count_expression": { "references": [ "local.k8s_deployments" ] } }, { "address": "datadog_monitor.kubernetes_worker_cpu_request_exceeded", "mode": "managed", "type": "datadog_monitor", "name": "kubernetes_worker_cpu_request_exceeded", "provider_config_key": "datadog", "expressions": { "message": { "references": [ "local.k8s_worker_deployments", "count.index", "local.datadog_escalation_team" ] }, "monitor_thresholds": [ { "critical": { "references": [ "local.kubernetes_api_cpu_request" ] }, "critical_recovery": { "references": [ "local.kubernetes_cpu_recovery_threshold" ] } } ], "name": { "references": [ "var.region", "var.environment", "local.datadog_service_name", "local.k8s_worker_deployments", "count.index" ] }, "priority": { "constant_value": 3 }, "query": { "references": [ "local.k8s_worker_deployments", "count.index", "local.kubernetes_api_cpu_request" ] }, "require_full_window": { "constant_value": true }, "tags": { "references": [ "local.datadog_tags" ] }, "type": { "constant_value": "query alert" } }, "schema_version": 0, "count_expression": { "references": [ "local.k8s_worker_deployments" ] } } ], "module_calls": {}, "variables": { "account": { "description": "some-description" }, "customer_profile_table_prefix": { "description": "some-description" }, "datadog_api_key": { "description": "some-description" }, "datadog_api_url": { "description": "some-description" }, "datadog_app_key": { "description": "some-description" }, "environment": { "description": "some-description" }, "region": { "description": "some-description" } } } } }
